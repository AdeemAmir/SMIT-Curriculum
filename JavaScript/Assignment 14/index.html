<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Marks Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input, select, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        #subjectButtons {
            display: none;
            margin-top: 20px;
        }
        .watermark {
            position: fixed;
            bottom: 10px;
            right: 28px;
            font-size: 14px;
            color: rgba(141, 141, 141, 0.5);
            pointer-events: none;
        }
        #adminButton {
            position: fixed;
            bottom: 10px;
            left: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        #adminButton:hover {
            background-color: #0056b3;
        }
        #output {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>Student Marks Management</h1>

<!-- Form for student number -->
<form id="studentForm">
    <label for="studentNumber">Enter Student Number (16050 or 271965):</label>
    <input type="text" id="studentNumber" required>
    <button type="submit">Submit</button>
</form>

<!-- Form for information type -->
<form id="infoForm" style="display:none;">
    <label for="infoType">Select Information Type:</label>
    <select id="infoType">
        <option value="all">All Information</option>
        <option value="subject1">Subject 1 Mark</option>
        <option value="subject2">Subject 2 Mark</option>
        <option value="subject3">Subject 3 Mark</option>
        <option value="total">Total Marks</option>
        <option value="percentage">Percentage</option>
        <option value="cgpa">CGPA</option>
    </select>
    <button type="submit" id="getInfoBySelect">Get Info by Select</button>
    
    <label for="indexInput">Or Enter Array Index (0-6):</label>
    <input type="number" id="indexInput" placeholder="Array Index (0-6)" min="0" max="6">
    <button type="submit" id="getInfoByIndex">Get Info by Index</button>
</form>

<!-- Admin Section -->
<button id="adminButton">Admin Login</button>
<div class="subject-buttons" id="subjectButtons">
    <button id="subject1Button">Edit Subject 1</button>
    <button id="subject2Button">Edit Subject 2</button>
    <button id="subject3Button">Edit Subject 3</button>
</div>

<div id="output"></div>

<div class="watermark">Code by Adeem Amir</div>

<script>
// Sample data for students using arrays
const students = {
    16050: ["Student 1", 85, 78, 92, 0, 0, 0], // [name, subject1, subject2, subject3, total, percentage, cgpa]
    271965: ["Student 2", 90, 88, 95, 0, 0, 0] // [name, subject1, subject2, subject3, total, percentage, cgpa]
};

// Load any existing data from localStorage
function loadStudentData() {
    const data = JSON.parse(localStorage.getItem('studentData'));
    if (data) {
        for (let studentNumber in data) {
            if (students[studentNumber]) {
                students[studentNumber].splice(1, 3, ...data[studentNumber].slice(1, 4));
                students[studentNumber][4] = data[studentNumber][4]; // total
                students[studentNumber][5] = data[studentNumber][5]; // percentage
                students[studentNumber][6] = data[studentNumber][6]; // cgpa
            }
        }
    }
}

// Function to calculate total, percentage, and CGPA
function calculateDetails(index) {
    const student = students[index];
    const total = student[1] + student[2] + student[3]; // sum of subject marks
    const percentage = (total / 300) * 100; // Assuming each subject is out of 100
    const cgpa = percentage / 9.5;

    // Store calculated values back in the student array
    student[4] = total; // total
    student[5] = percentage; // percentage
    student[6] = cgpa; // cgpa
}

// Function to get student details by index
function getStudentDetails(index, infoType) {
    if (!(index in students)) {
        return "Invalid student number.";
    }

    // Calculate details if not already calculated
    if (students[index][4] === 0) {
        calculateDetails(index);
    }

    const student = students[index];
    let output = `Name: ${student[0]}<br>`;

    switch (infoType) {
        case "subject1":
            output += `Subject 1 Mark: ${student[1]}`;
            break;
        case "subject2":
            output += `Subject 2 Mark: ${student[2]}`;
            break;
        case "subject3":
            output += `Subject 3 Mark: ${student[3]}`;
            break;
        case "total":
            output += `Total Marks: ${student[4]}`;
            break;
        case "percentage":
            output += `Percentage: ${student[5].toFixed(2)}%`;
            break;
        case "cgpa":
            output += `CGPA: ${student[6].toFixed(2)}`;
            break;
        case "all":
            output += `Subject 1 Mark: ${student[1]}<br>`;
            output += `Subject 2 Mark: ${student[2]}<br>`;
            output += `Subject 3 Mark: ${student[3]}<br>`;
            output += `Total Marks: ${student[4]}<br>`;
            output += `Percentage: ${student[5].toFixed(2)}%<br>`;
            output += `CGPA: ${student[6].toFixed(2)}`;
            break;
        default:
            output = "Invalid information type.";
    }

    return output;
}

// Function to handle admin login/logout
function toggleAdmin() {
    const isAdmin = document.getElementById('adminButton').innerText === "Admin Logout";
    if (isAdmin) {
        document.getElementById('adminButton').innerText = "Admin Login";
        document.getElementById('subjectButtons').style.display = 'none'; // Hide subject buttons
    } else {
        const username = prompt("Enter admin username:");
        const password = prompt("Enter admin password:");
        if (username === "admin" && password === "admin") {
            document.getElementById('adminButton').innerText = "Admin Logout";
            document.getElementById('subjectButtons').style.display = 'block'; // Show subject buttons
        } else {
            alert("Invalid username or password. Please try again.");
        }
    }
}

// Function to edit student marks
function editMarks(subjectIndex) {
    const studentNumber = document.getElementById('studentNumber').value;
    const newMark = prompt(`Enter new mark for Subject ${subjectIndex + 1}:`);
    if (newMark !== null && !isNaN(newMark)) {
        students[studentNumber][subjectIndex + 1] = parseInt(newMark); // subjectIndex + 1 because index 0 is name
        localStorage.setItem('studentData', JSON.stringify({
            [studentNumber]: students[studentNumber]
        }));
        calculateDetails(studentNumber); // Update total, percentage, and CGPA after editing
        alert(`Subject ${subjectIndex + 1} updated to ${newMark}.`);
    } else {
        alert("Invalid input. Please enter a valid mark.");
    }
}

// Event listener for student form submission
document.getElementById('studentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    document.getElementById('infoForm').style.display = 'block'; // Show the info form
    loadStudentData(); // Load student data from localStorage
});

// Event listener for getting information by select
document.getElementById('getInfoBySelect').addEventListener('click', function(e) {
    e.preventDefault();
    const studentNumber = document.getElementById('studentNumber').value;
    const infoType = document.getElementById('infoType').value;

    const output = getStudentDetails(studentNumber, infoType);
    document.getElementById('output').innerHTML = output;
});

// Event listener for getting information by index
document.getElementById('getInfoByIndex').addEventListener('click', function(e) {
    e.preventDefault();
    const studentNumber = document.getElementById('studentNumber').value;
    const indexInput = parseInt(document.getElementById('indexInput').value);

    let output;
    if (!isNaN(indexInput) && indexInput >= 0 && indexInput < 7) { // Index 0-6
        // Calculate details first if needed
        calculateDetails(studentNumber); // Ensure details are updated

        if (indexInput === 0) {
            output = `Name: ${students[studentNumber][0]}`;
        } else if (indexInput === 1) {
            output = `Subject 1 Mark: ${students[studentNumber][1]}`;
        } else if (indexInput === 2) {
            output = `Subject 2 Mark: ${students[studentNumber][2]}`;
        } else if (indexInput === 3) {
            output = `Subject 3 Mark: ${students[studentNumber][3]}`;
        } else if (indexInput === 4) {
            output = `Total Marks: ${students[studentNumber][4]}`;
        } else if (indexInput === 5) {
            output = `Percentage: ${students[studentNumber][5].toFixed(2)}%`;
        } else if (indexInput === 6) {
            output = `CGPA: ${students[studentNumber][6].toFixed(2)}`;
        }
    } else {
        output = "Invalid array index. Please enter a valid index (0-6).";
    }

    document.getElementById('output').innerHTML = output;
});

// Event listener for admin button
document.getElementById('adminButton').addEventListener('click', function() {
    toggleAdmin();
});

// Event listeners for subject buttons
document.getElementById('subject1Button').addEventListener('click', function() {
    editMarks(0);
});
document.getElementById('subject2Button').addEventListener('click', function() {
    editMarks(1);
});
document.getElementById('subject3Button').addEventListener('click', function() {
    editMarks(2);
});

// Load initial student data from localStorage
loadStudentData();
</script>

</body>
</html>
